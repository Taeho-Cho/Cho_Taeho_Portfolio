#include<SoftwareSerial.h>
#include<DHT.h>

#define DHTPIN A0  // 온습도 출력핀
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);

SoftwareSerial HM10(2,3); // RX(2)핀을 HM10의 TX에, TX(3)핀을 HM10의 RX에 연결

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  HM10.begin(9600);
  
  Serial.println("good moring lol this is the HM-10");
  
  delay(2000);
}

void loop() {
  // put your main code here, to run repeatedly:
  int h = dht.readHumidity();
  int t = dht.readTemperature();
  int light = analogRead(1);  // A1, the lighter the lower the value
  int noise = analogRead(2);  // A2
  String str = String(h)+","+String(t)+","+String(light)+","+String(noise);
  //delay(1000);
  
  //Serial.print("humidity:");          // ‘시리얼 플로터’ 사용위해 이부분 주석 필요
  //Serial.println(h);                  // 습도값 출력
  //Serial.print("temperature:");       // ‘시리얼 플로터’ 사용위해 이부분 주석 필요
  //Serial.println(t);                  // 온도값 출력 
  //Serial.print("light:");          
  //Serial.println(light); 
  //Serial.print("noise:");          
  //Serial.println(noise);
  
  //Serial.println(str);
  HM10.println(str);  // 하나의 문자열로 값을 
  delay(500);
  

/*
  if(HM10.available()){  // HM10.read()
    Serial.write(HM10.read());
    }
  
  if(Serial.available()){  // Serial.read()
    HM10.write(Serial.read());  
    //Serial.write(Serial.read());
    }
*/
}
